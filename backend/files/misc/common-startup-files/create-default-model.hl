
// Creating the default OpenAI machine learning model.
try

   // Connecting to Magic database.
   data.connect:[generic|magic]

      // Checking if default model has already been created.
      io.file.load:/misc/common-startup-files/default.md
      data.read
         table:ml_types
         where
            and
               type.eq:default
      if
         not-exists:x:@data.read/*
         .lambda

            // Creating default generic model.
            data.create
               table:ml_types
               values
                  type:default
                  model:gpt-4.1-2025-04-14
                  max_tokens:int:25000
                  max_context_tokens:int:25000
                  max_request_tokens:int:25000
                  max_function_invocations:int:100
                  temperature:decimal:0.1
                  supervised:int:1
                  cached:int:0
                  auth:root
                  threshold:decimal:0.3
                  greeting:Hi there, I am your virtual AI-based software development assistant. How can I help you?
                  system_message:x:@io.file.load

      else

         // Updating existing type
         data.update
            table:ml_types
            values
               model:gpt-4.1-2025-04-14
               max_tokens:int:25000
               max_context_tokens:int:25000
               max_request_tokens:int:25000
               max_function_invocations:int:100
               temperature:decimal:0.1
               supervised:int:1
               cached:int:0
               auth:root
               threshold:decimal:0.3
               greeting:Hi there, I am your virtual AI-based software development assistant. How can I help you?
               system_message:x:@io.file.load
            where
               and
                  type.eq:default

.catch

   // Doing some basic logging.
   log.info:Something went wrong as we tried to create default type
      message:x:@.arguments/*/message
